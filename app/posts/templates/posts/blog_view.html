{% extends 'base.html' %}


{% block head %}
{{ super() }}
<style>
    .pagination > .active > a {
        color: white;
        background-color: #292b2c;
        border: solid 1px #292b2c;
    }
</style>
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
{% endblock %}


{% block title %}
Blog
{% endblock %}


{% block content_title %}
Posts
{% endblock %}


{% block content %}


{% if current_user.is_authenticated %}
<div>
    <a class="btn btn-outline-dark" href="{{ url_for('posts.create_post') }}" role="button" style="margin-bottom: 8px">New
        post</a>
</div>
{% endif %}


<ul class='posts'>
{% for post in pages.items %}
<li class='post'>
    <div class="profile-thumbnail">
        <a href="{{ url_for('user.user', username=post.author.username) }}">
            <img class="profile-thumbnail" src="{{ post.author.gravatar(size=40) }}">
        </a>
    </div>
    <div class='post-date'>
        {{ moment(post.created, local=true).format('LL [at] HH:mm') }}
    </div>
    <div class='post-author'>
        <a href="{{ url_for('user.user', username=post.author.username) }}">
            {{ post.author.username }}
        </a>
    </div>
    <div class='post-title'>
        {{ post.title }}
    </div>
    <div class='post-body'>
        {{ post.body }}
    </div>
</li>
{% endfor %}
</ul>


<nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">

        <li class="page-item {% if not pages.has_prev %} disabled {% endif %}">
            <a class="page-link" href="./?page=1" aria-label="First">
                <span aria-hidden="true">&laquo;</span>
            </a>
        </li>

        <li class="page-item {% if not pages.has_prev %} disabled {% endif %}">
            <a class="page-link" href="./?page={{ pages.prev_num }}" aria-label="Previous">
                <span aria-hidden="true">&lsaquo;</span>
            </a>
        </li>

        
        {% for page in pages.iter_pages(left_edge=0, right_edge=0, left_current=1, right_current=3) %}
            <li class="page-item {% if page == pages.page %} active" aria-current="page{% endif %}">
                {% if page != None %}
                    <a class="page-link" href="./?page={{ page }}">{{ page }}</a>
                {% endif %}
            </li>
        {% endfor %}


        <li class="page-item {% if not pages.has_next %} disabled {% endif %}">
            <a class="page-link" href="./?page={{ pages.next_num }}" aria-label="Next">
                <span aria-hidden="true">&rsaquo;</span>
            </a>
        </li>

        <li class="page-item {% if not pages.has_next %} disabled {% endif %}">
            <a class="page-link" href="./?page={{ pages.pages }}" aria-label="Last">
                <span aria-hidden="true">&raquo;</span>
            </a>
        </li>

    </ul>
</nav>

{% endblock %}